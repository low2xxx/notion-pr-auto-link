name: 'Notion PR Auto Link'
description: 'Automatically link GitHub PRs to Notion tasks'
author: 'low2xxx'

branding:
  icon: 'link'
  color: 'blue'

inputs:
  github-token:
    description: 'GitHub token for PR comments'
    required: true
    default: ${{ github.token }}

runs:
  using: 'composite'
  steps:    
    - name: Run Notion PR Link
      uses: actions/github-script@v7
      with:
        github-token: ${{ inputs.github-token }}
        script: |
          const path = require('path');
          const scriptPath = path.join('${{ github.action_path }}', '.github', 'scripts', 'notion-pr-auto-link', 'main.js');
          const { main } = require(scriptPath);
          await main(context, github);